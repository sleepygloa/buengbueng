<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>

<sqlMap namespace="bossERP">
	
	<!-- 사장님 정보 가져오기 -->
	<select id="getBossInfo" parameterClass="String" resultClass="bossDTO">
		select * from bossInfo where b_id = #id#; 
	</select>
	<!-- 좌석이용 현황 가져오기 -->
	<select id="getSeatCount" parameterClass="String" resultClass="seatInfo">
		select * from seatState where licenseKey = #key#;
	</select>
	<!-- pc방 좌석 개수 추가 -->
	<update id="addSeat" parameterClass="java.util.HashMap">
		update bossInfo set b_pccount = b_pccount + #pcCount# where b_id = #id#;
	</update>
	<!-- pc방 좌석 개수 삭제 -->
	<update id="delSeat" parameterClass="java.util.HashMap">
		update bossInfo set b_pccount = b_pccount - #pcCount# where b_id = #id#;
	</update>
	<!-- pc방 좌석 개수 추가/삭제에 따른 좌석이용현황 초기화 -->
	<update id="modiSeatCount" parameterClass="java.util.HashMap">
		update seatState set seatCheck = #seatCheck# where licenseKey = #key#;
	</update>
<!-- ======================================================================================= -->
	<!-- 사용자가 로그인 한 좌석 번호 얻기 -->
	<select id="getPcNum" parameterClass="java.util.HashMap" resultClass="int">
		select num from pcInfo where ip = #ip# and b_key = #key#;
	</select>
</sqlMap>