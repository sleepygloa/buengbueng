<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="menu">

	

	
	<!-- menu 추가  -->
	<insert id="insertMenu" parameterClass="menuDto">
		insert into menu values(#name#, #price#, #category#, #company#);
	</insert>	
	
	<!-- 카테고리 버튼 만들기 -->
	<select id="getCategory" resultClass="String"> 
		select distinct category from menu;
	</select>
	
	<!-- menu 가져오기 -->
	<select id="getMenu" resultClass="menuDto">
		select * from menu;
	</select>
	
	<!-- menu 수정하기 위해 상품명에 맞는 정보 가져오기-->
	<select id="getMenuName" parameterClass="String" resultClass="menuDto">
		select * from menu where name=#name#;
	</select>
	
	<!-- menu 수정 -->
	<update id="updateMenu" parameterClass="java.util.HashMap">
		update menu set name=#name#, price=#price#, category=#category#, company=#company# where name=#beforeName#;
	</update>
	
	
	<!-- menu 삭제 -->
	<delete id="deleteMenu" parameterClass="String">
		delete from menu where name=#name#;
	</delete>
	
	<!-- 카테고리별 메뉴 List -->
	<select id="categoryMenuList" parameterClass="String" resultClass="menuDto">
		select * from menu where category=#category#;
	</select>
	
	
	
	
	<!-- 등록된 product 내역 보여주기 -->
	<select id="getProduct" resultClass="productDto">
		select * from product;  
	</select>
	
	
	
	<!-- 메뉴에 있는 제품 product 제품명에 보여지게 -->
	<select id="productName" resultClass="productDto">
		select name from menu;  
	</select>
	
	<!-- product 추가 -->
	<insert id="insertProduct" parameterClass="productDto">
		insert into product values(#code#, #name#, #lastday#, #salecheck#, now());
	</insert>
	
	<!-- product 수정하기 위해 재고명에 맞는 정보 가져오기, 바코드 중복 방지-->
	<select id="getProductName" parameterClass="int" resultClass="productDto">
		select * from product where code=#code#;
	</select>
	
	<!-- product 수정 -->
	<update id="updateProduct" parameterClass="productDto">
		update product set name=#name#, code=#code#, lastday=#lastday# where code=#code#;
	</update>
	
	
	<!-- product 삭제 -->
	<delete id="deleteProduct" parameterClass="int">
		delete from product where code=#code#;
	</delete>
	
	
</sqlMap>
	